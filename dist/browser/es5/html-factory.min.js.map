{"version":3,"file":"html-factory.min.js","sources":["html-factory.min.js"],"sourcesContent":["\"use strict\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nvar HtmlFactory = function () {\n  /*\n  \n  define typeFunctionCaller: {\n  \tname: string,\n  \targs?: [any]\n  }\n  \n  define typeCreateElementResult: {\n  \telement: Node,\n  \tfunctionCallers: [typeFunctionCaller]\n  }\n  \n  define typeRenderElementResult: {\n  \telement: string,\n  \tfunctionCallers: [typeFunctionCaller]\n  }\n  */\n\n  /*\n  renderFragment: ({\n  \tchildren: [any],\n  \tfunctionCallers: [typeFunctionCaller] = []\n  }) => typeRenderElementResult\n  */\n  function renderFragment(_ref) {\n    var children = _ref.children,\n        _ref$functionCallers = _ref.functionCallers,\n        functionCallers = _ref$functionCallers === void 0 ? [] : _ref$functionCallers;\n    var functionCallerSet = [];\n    var element = children.filter(function (child) {\n      return child != null;\n    }).map(function (child) {\n      if (child && _typeof(child) === 'object') {\n        if (Array.isArray(child)) {\n          child = renderFragment({\n            children: child\n          });\n        } else if (child.name) {\n          child = renderElement(child);\n        } else if (child.children) {\n          child = renderFragment(child);\n        }\n\n        if (child.element) {\n          var _child = child,\n              childElement = _child.element,\n              childFunctionCallers = _child.functionCallers;\n          functionCallerSet.push.apply(functionCallerSet, _toConsumableArray(childFunctionCallers));\n          return childElement;\n        }\n      }\n\n      return child;\n    });\n    functionCallers.splice.apply(functionCallers, [0, 0].concat(functionCallerSet));\n    return {\n      element: element.join(''),\n      functionCallers: functionCallers\n    };\n  }\n  /*\n  renderElement: ({\n  \tname: string,\n  \tattributes?: object,\n  \tchildren?: [any],\n  \tfunctionCallers: [typeFunctionCaller] = []\n  }) => typeRenderElementResult\n  */\n\n\n  function renderElement(_ref2) {\n    var name = _ref2.name,\n        attributes = _ref2.attributes,\n        children = _ref2.children,\n        _ref2$functionCallers = _ref2.functionCallers,\n        functionCallers = _ref2$functionCallers === void 0 ? [] : _ref2$functionCallers;\n    var opening = [name];\n\n    if (attributes) {\n      for (var key in attributes) {\n        var value = attributes[key];\n\n        if (value != null) {\n          if (value === '') {\n            opening.push(key);\n          } else {\n            opening.push(\"\".concat(key, \"=\\\"\").concat(value, \"\\\"\"));\n          }\n        }\n      }\n    }\n\n    var element = [\"<\".concat(opening.join(' '), \">\")];\n\n    if (children) {\n      element.push(renderFragment({\n        children: children,\n        functionCallers: functionCallers\n      }).element);\n      element.push(\"</\".concat(name, \">\"));\n    }\n\n    return {\n      element: element.join(''),\n      functionCallers: functionCallers\n    };\n  }\n  /*\n  renderStyleString: (\n  \tstyles: object\n  ) => string\n  */\n\n\n  function renderStyleString(styles) {\n    var styleStrings = [];\n\n    for (var key in styles) {\n      var value = styles[key];\n\n      if (_typeof(value) === 'object') {\n        styleStrings.push(\"\".concat(key, \" { \").concat(renderStyleString(value), \" }\"));\n        continue;\n      }\n\n      styleStrings.push(\"\".concat(key, \": \").concat(value, \";\"));\n    }\n\n    return styleStrings.join(' ');\n  }\n  /*\n  renderFunctionCaller: (\n  \tfunctionCaller: typeFunctionCaller\n  ) => string\n  */\n\n\n  function renderFunctionCaller(_ref3) {\n    var name = _ref3.name,\n        _ref3$args = _ref3.args,\n        args = _ref3$args === void 0 ? [] : _ref3$args;\n    return \"\".concat(name, \"(\").concat(args.map(function (arg) {\n      return JSON.stringify(arg);\n    }).join(', '), \");\");\n  }\n  /*\n  createFragment: ({\n  \tchildren: [any],\n  \tfunctionCallers: [typeFunctionCaller] = []\n  }) => typeCreateElementResult\n  */\n\n\n  function createFragment(_ref4) {\n    var children = _ref4.children,\n        _ref4$functionCallers = _ref4.functionCallers,\n        functionCallers = _ref4$functionCallers === void 0 ? [] : _ref4$functionCallers;\n    var functionCallerSet = [];\n    var element = new DocumentFragment();\n    element.append.apply(element, _toConsumableArray(children.filter(function (child) {\n      return child != null;\n    }).map(function (child) {\n      if (child && _typeof(child) === 'object') {\n        if (Array.isArray(child)) {\n          child = createFragment({\n            children: child\n          });\n        } else if (child.name) {\n          child = createElement(child);\n        } else if (child.children) {\n          child = createFragment(child);\n        }\n\n        if (child.element) {\n          var _child2 = child,\n              childElement = _child2.element,\n              childFunctionCallers = _child2.functionCallers;\n          functionCallerSet.push.apply(functionCallerSet, _toConsumableArray(childFunctionCallers));\n          return childElement;\n        }\n      }\n\n      return child;\n    })));\n    functionCallers.splice.apply(functionCallers, [0, 0].concat(functionCallerSet));\n    return {\n      element: element,\n      functionCallers: functionCallers\n    };\n  }\n  /*\n  createElement: ({\n  \tnamespaceURI: string = 'http://www.w3.org/1999/xhtml',\n  \tname: string,\n  \tattributes?: object,\n  \tchildren?: [any],\n  \tfunctionCallers: [typeFunctionCaller] = []\n  }) => typeCreateElementResult\n  */\n\n\n  function createElement(_ref5) {\n    var _ref5$namespaceURI = _ref5.namespaceURI,\n        namespaceURI = _ref5$namespaceURI === void 0 ? 'http://www.w3.org/1999/xhtml' : _ref5$namespaceURI,\n        name = _ref5.name,\n        attributes = _ref5.attributes,\n        children = _ref5.children,\n        _ref5$functionCallers = _ref5.functionCallers,\n        functionCallers = _ref5$functionCallers === void 0 ? [] : _ref5$functionCallers;\n    var element = document.createElementNS(namespaceURI, name);\n\n    if (attributes) {\n      for (var key in attributes) {\n        var value = attributes[key];\n\n        if (value != null) {\n          element.setAttribute(key, value);\n        }\n      }\n    }\n\n    if (children) {\n      var fragment = createFragment({\n        children: children,\n        functionCallers: functionCallers\n      });\n      element.append(fragment.element);\n    }\n\n    return {\n      element: element,\n      functionCallers: functionCallers\n    };\n  }\n  /*\n  callFunctionCaller: (\n  \tfunctionCaller: typeFunctionCaller\n  ) => any\n  */\n\n\n  function callFunctionCaller(_ref6) {\n    var name = _ref6.name,\n        _ref6$args = _ref6.args,\n        args = _ref6$args === void 0 ? [] : _ref6$args;\n    return name.split('.').reduce(function (acc, cur) {\n      return acc[cur];\n    }, window).apply(void 0, _toConsumableArray(args));\n  }\n\n  return {\n    renderFragment: renderFragment,\n    renderElement: renderElement,\n    renderStyleString: renderStyleString,\n    renderFunctionCaller: renderFunctionCaller,\n    createFragment: createFragment,\n    createElement: createElement,\n    callFunctionCaller: callFunctionCaller\n  };\n}();\n/* exported HtmlFactory */"],"names":["_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","_typeof","obj","HtmlFactory","renderFragment","_ref","children","_ref$functionCallers","functionCallers","functionCallerSet","element","filter","child","map","childElement","childFunctionCallers","renderElement","_child","push","apply","splice","concat","join","_ref2","attributes","_ref2$functionCallers","opening","key","value","createFragment","_ref4","_ref4$functionCallers","DocumentFragment","append","createElement","_child2","_ref5","_ref5$namespaceURI","namespaceURI","_ref5$functionCallers","document","createElementNS","setAttribute","fragment","renderStyleString","styles","styleStrings","renderFunctionCaller","_ref3","args","_ref3$args","arg","JSON","stringify","callFunctionCaller","_ref6","_ref6$args","split","reduce","acc","cur","window"],"mappings":"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"}