{"version":3,"file":"html-factory.min.js","sources":["html-factory.min.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar HtmlFactory = function () {\n  /*\n  createFragment: (arg0: {\n  \tchildren: [any],\n  \tfunctionCallers?: [{\n  \t\tname: string,\n  \t\targs?: [any]\n  \t}] = []\n  }) => {\n  \telement: Node\n  \tfunctionCallers: [{\n  \t\tname: string,\n  \t\targs?: [any]\n  \t}]\n  }\n  */\n  function createFragment(_ref) {\n    var children = _ref.children,\n        _ref$functionCallers = _ref.functionCallers,\n        functionCallers = _ref$functionCallers === void 0 ? [] : _ref$functionCallers;\n    var functionCallerSet = [];\n    var element = new DocumentFragment();\n    element.append.apply(element, _toConsumableArray(children.filter(function (child) {\n      return child != null;\n    }).map(function (child) {\n      if (child && _typeof(child) === 'object') {\n        if (Array.isArray(child)) {\n          child = createFragment({\n            children: child\n          });\n        } else if (child.name) {\n          child = createElement(child);\n        } else if (child.children) {\n          child = createFragment(child);\n        }\n\n        if (child.element) {\n          var _child = child,\n              childElement = _child.element,\n              childFunctionCallers = _child.functionCallers;\n          functionCallerSet.push.apply(functionCallerSet, _toConsumableArray(childFunctionCallers));\n          return childElement;\n        }\n      }\n\n      return child;\n    })));\n    functionCallers.splice.apply(functionCallers, [0, 0].concat(functionCallerSet));\n    return {\n      element: element,\n      functionCallers: functionCallers\n    };\n  }\n  /*\n  createElement: (arg0: {\n  \tnamespaceURI?: string = 'http://www.w3.org/1999/xhtml',\n  \tname: string,\n  \tattributes?: object,\n  \tchildren?: [any],\n  \tfunctionCallers?: [{\n  \t\tname: string,\n  \t\targs?: [any]\n  \t}] = []\n  }) => {\n  \telement: Node\n  \tfunctionCallers: [{\n  \t\tname: string,\n  \t\targs?: [any]\n  \t}]\n  }\n  */\n\n\n  function createElement(_ref2) {\n    var _ref2$namespaceURI = _ref2.namespaceURI,\n        namespaceURI = _ref2$namespaceURI === void 0 ? 'http://www.w3.org/1999/xhtml' : _ref2$namespaceURI,\n        name = _ref2.name,\n        attributes = _ref2.attributes,\n        children = _ref2.children,\n        _ref2$functionCallers = _ref2.functionCallers,\n        functionCallers = _ref2$functionCallers === void 0 ? [] : _ref2$functionCallers;\n    var element = document.createElementNS(namespaceURI, name);\n\n    if (attributes) {\n      for (var key in attributes) {\n        var value = attributes[key];\n\n        if (value != null) {\n          element.setAttribute(key, value);\n        }\n      }\n    }\n\n    if (children) {\n      var fragment = createFragment({\n        children: children,\n        functionCallers: functionCallers\n      });\n      element.append(fragment.element);\n    }\n\n    return {\n      element: element,\n      functionCallers: functionCallers\n    };\n  }\n  /*\n  callFunctionCaller: (arg0: {\n  \tname: string,\n  \targs?: [any] = []\n  }) => any\n  */\n\n\n  function callFunctionCaller(_ref3) {\n    var name = _ref3.name,\n        _ref3$args = _ref3.args,\n        args = _ref3$args === void 0 ? [] : _ref3$args;\n    return name.split('.').reduce(function (acc, cur) {\n      return acc[cur];\n    }, window).apply(void 0, _toConsumableArray(args));\n  }\n  /*\n  renderFragment: (arg0: {\n  \tchildren: [any],\n  \tfunctionCallers?: [{\n  \t\tname: string,\n  \t\targs?: [any]\n  \t}] = []\n  }) => {\n  \telement: string\n  \tfunctionCallers: [{\n  \t\tname: string,\n  \t\targs?: [any]\n  \t}]\n  }\n  */\n\n\n  function renderFragment(_ref4) {\n    var children = _ref4.children,\n        _ref4$functionCallers = _ref4.functionCallers,\n        functionCallers = _ref4$functionCallers === void 0 ? [] : _ref4$functionCallers;\n    var functionCallerSet = [];\n    var element = children.filter(function (child) {\n      return child != null;\n    }).map(function (child) {\n      if (child && _typeof(child) === 'object') {\n        if (Array.isArray(child)) {\n          child = renderFragment({\n            children: child\n          });\n        } else if (child.name) {\n          child = renderElement(child);\n        } else if (child.children) {\n          child = renderFragment(child);\n        }\n\n        if (child.element) {\n          var _child2 = child,\n              childElement = _child2.element,\n              childFunctionCallers = _child2.functionCallers;\n          functionCallerSet.push.apply(functionCallerSet, _toConsumableArray(childFunctionCallers));\n          return childElement;\n        }\n      }\n\n      return child;\n    }).join('');\n    functionCallers.splice.apply(functionCallers, [0, 0].concat(functionCallerSet));\n    return {\n      element: element,\n      functionCallers: functionCallers\n    };\n  }\n  /*\n  renderElement: (arg0: {\n  \tname: string,\n  \tattributes?: object,\n  \tchildren?: [any],\n  \tfunctionCallers?: [{\n  \t\tname: string,\n  \t\targs?: [any]\n  \t}] = []\n  }) => {\n  \telement: Node\n  \tfunctionCallers: [{\n  \t\tname: string,\n  \t\targs?: [any]\n  \t}]\n  }\n  */\n\n\n  function renderElement(_ref5) {\n    var name = _ref5.name,\n        attributes = _ref5.attributes,\n        children = _ref5.children,\n        _ref5$functionCallers = _ref5.functionCallers,\n        functionCallers = _ref5$functionCallers === void 0 ? [] : _ref5$functionCallers;\n    var opening = [name];\n\n    if (attributes) {\n      for (var key in attributes) {\n        var value = attributes[key];\n\n        if (value != null) {\n          if (value === '') {\n            opening.push(key);\n          } else {\n            opening.push(\"\".concat(key, \"=\\\"\").concat(value, \"\\\"\"));\n          }\n        }\n      }\n    }\n\n    var element = [\"<\".concat(opening.join(' '), \">\")];\n\n    if (children) {\n      element.push(renderFragment({\n        children: children,\n        functionCallers: functionCallers\n      }).element);\n      element.push(\"</\".concat(name, \">\"));\n    }\n\n    return {\n      element: element.join(''),\n      functionCallers: functionCallers\n    };\n  }\n  /*\n  renderStyleString: (\n  \tstyles: object\n  ) => string\n  */\n\n\n  function renderStyleString(styles) {\n    var styleStrings = [];\n\n    for (var key in styles) {\n      var value = styles[key];\n\n      if (_typeof(value) === 'object') {\n        styleStrings.push(\"\".concat(key, \" { \").concat(renderStyleString(value), \" }\"));\n        continue;\n      }\n\n      styleStrings.push(\"\".concat(key, \": \").concat(value, \";\"));\n    }\n\n    return styleStrings.join(' ');\n  }\n  /*\n  renderFunctionCaller: ({\n  \tname: string,\n  \targs?: [any] = []\n  }) => string\n  */\n\n\n  function renderFunctionCaller(_ref6) {\n    var name = _ref6.name,\n        _ref6$args = _ref6.args,\n        args = _ref6$args === void 0 ? [] : _ref6$args;\n    return \"\".concat(name, \"(\").concat(args.map(function (arg) {\n      return JSON.stringify(arg);\n    }).join(', '), \");\");\n  }\n\n  return {\n    createFragment: createFragment,\n    createElement: createElement,\n    callFunctionCaller: callFunctionCaller,\n    renderFragment: renderFragment,\n    renderElement: renderElement,\n    renderStyleString: renderStyleString,\n    renderFunctionCaller: renderFunctionCaller\n  };\n}();\n/* exported HtmlFactory */"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","toString","call","slice","name","Array","from","test","iter","isArray","len","length","i","arr2","HtmlFactory","createFragment","_ref","children","_ref$functionCallers","functionCallers","functionCallerSet","element","DocumentFragment","append","apply","filter","child","map","childElement","childFunctionCallers","createElement","_child","push","splice","concat","_ref2","_ref2$namespaceURI","namespaceURI","attributes","_ref2$functionCallers","document","createElementNS","key","value","setAttribute","fragment","renderFragment","_ref4","_ref4$functionCallers","renderElement","_child2","join","_ref5","_ref5$functionCallers","opening","callFunctionCaller","_ref3","args","_ref3$args","split","reduce","acc","cur","window","renderStyleString","styles","styleStrings","renderFunctionCaller","_ref6","_ref6$args","arg","JSON","stringify"],"mappings":"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"}